<div>
    <h1 id="titleExp">Experiencia Laboral 
        <button class="btn mb-3" data-bs-toggle="modal" data-bs-target="#addExpModal" *ngIf="isLogged"><i id="plusIcon" class="fa-solid fa-square-plus"></i></button>
    </h1>
</div>
<div class="row" *ngFor="let experiencia of experiencias">
    <div class="col-lg-3 card mb-3" style="width: 15rem;">
        <img [src]="experiencia.imgExp" class="img-fluid" id="BB" alt="Baudron">
    </div>
    <div class="col-lg-7">
        <ul>
            <li><h1 id="establecimiento">{{experiencia.nameExp}}</h1>-<h3><time>{{experiencia.fechaExpIni}}</time>-<time>{{experiencia.fechaExpFin}}</time></h3>
                <button (click)="actualizarExp(experiencia.idExp)" class="btn mb-2" data-bs-toggle="modal" data-bs-target="#editExpModal" *ngIf="isLogged"><i id="penIcon" class="fa-solid fa-pen-to-square"></i></button>
                <button (click)="borrarExp(experiencia.idExp)" class="btn mb-2" *ngIf="isLogged"><i id="trashIcon" class="fa-solid fa-trash-can"></i></button>
            <p id="cargo">{{experiencia.cargoExp}}</p>
            <p id="aptitudes">{{experiencia.logrosExp}}</p>
        <hr>    
        </li>
        </ul>
    </div>
</div>
<!--Modal añadir-->
<div class="modal fade" id="addExpModal" tabindex="-1" aria-labelledby="addExpModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addExpModalLabel">Añadir Experiencia</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form [formGroup]="formExp" (ngSubmit)="agregarExp()">
                    <div class="form-group">
                        <label for="name-Exp" class="form-label">Nombre</label>
                        <input formControlName="nameExp" type="text"  class="form-control" id="name-Exp" autocomplete="off">
                        <span *ngIf="formExp.get('nameExp')?.invalid && formExp.get('nameExp')?.touched" class="text-danger">El nombre es requerido</span>
                    </div>
                    <div class="form-group">
                        <label for="cargo-Exp" class="form-label">Cargo</label>
                        <input formControlName="cargoExp" type="text"  class="form-control" id="cargo-Exp" autocomplete="off">
                        <span *ngIf="formExp.get('cargoExp')?.invalid && formExp.get('cargoExp')?.touched" class="text-danger">El cargo es requerido</span>
                    </div>
                    <div class="form-group">
                        <label for="logros-Exp" class="form-label">Logros</label>
                        <textarea formControlName="logrosExp" type="text"  class="form-control" id="logros-Exp" rows="8" autocomplete="off"></textarea>
                        <span *ngIf="formExp.get('logrosExp')?.invalid && formExp.get('logrosExp')?.touched" class="text-danger">Los logros son requeridos</span>
                    </div>
                    <div class="form-group">
                        <label for="img-Exp" class="form-label">Imagen URL</label>
                        <input formControlName="imgExp" type="text"  class="form-control" id="img-Exp" autocomplete="off">
                        <span *ngIf="formExp.get('imgExp')?.invalid && formExp.get('imgExp')?.touched" class="text-danger">El link es requerido</span>
                    </div>
                    <div class="form-group">
                        <label for="fecha-IniExp" class="form-label">Fecha de Inicio</label>
                        <input formControlName="fechaExpIni" type="text" class="form-control" id="fecha-IniExp" autocomplete="off">
                        <span *ngIf="formExp.get('fechaExpIni')?.invalid && formExp.get('fechaExpIni')?.touched" class="text-danger">La fecha de inicio es requerida</span>
                    </div>
                    <div class="form-group">
                        <label for="fecha-FinExp" class="form-label">Fecha de Finalizacion</label>
                        <input formControlName="fechaExpFin" type="text" class="form-control" id="fecha-FinExp" autocomplete="off">
                        <span *ngIf="formExp.get('fechaExpFin')?.invalid && formExp.get('fechaExpFin')?.touched" class="text-danger">La fecha de finalizacion es requerida</span>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button"  class="btn btn-danger" data-bs-dismiss="modal">Close</button>
                <button type="submit" (click)="agregarExp()" [disabled]="formExp.invalid" class="btn btn-primary">Save</button>
            </div>
        </div>
    </div>
</div>
<!--Modal editar-->
<div class="modal fade" id="editExpModal" tabindex="-1" aria-labelledby="editExpModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editExpModalLabel">Editar Experiencia</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form [formGroup]="formExp" (ngSubmit)="editExperiencia()">
                    <div class="form-group">
                        <label for="nombre-Exp" class="form-label">Nombre</label>
                        <input formControlName="nameExp" type="text"  class="form-control" id="nombre-Exp" autocomplete="off">
                        <span *ngIf="formExp.get('nameExp')?.invalid && formExp.get('nameExp')?.touched" class="text-danger">El nombre es requerido</span>
                    </div>
                    <div class="form-group">
                        <label for="cargos-Exp" class="form-label">Cargo</label>
                        <input formControlName="cargoExp" type="text"  class="form-control" id="cargos-Exp" autocomplete="off">
                        <span *ngIf="formExp.get('cargoExp')?.invalid && formExp.get('cargoExp')?.touched" class="text-danger">El cargo es requerido</span>
                    </div>
                    <div class="form-group">
                        <label for="logro-Exp" class="form-label">Logros</label>
                        <textarea formControlName="logrosExp" type="text"  class="form-control" id="logro-Exp" rows="8" autocomplete="off"></textarea>
                        <span *ngIf="formExp.get('logrosExp')?.invalid && formExp.get('logrosExp')?.touched" class="text-danger">Los logros son requeridos</span>
                    </div>
                    <div class="form-group">
                        <label for="imgn-Exp" class="form-label">Imagen URL</label>
                        <input formControlName="imgExp" type="text"  class="form-control" id="imgn-Exp" autocomplete="off">
                        <span *ngIf="formExp.get('imgExp')?.invalid && formExp.get('imgExp')?.touched" class="text-danger">El link es requerido</span>
                    </div>
                    <div class="form-group">
                        <label for="fecha-ExpIni" class="form-label">Fecha de Inicio</label>
                        <input formControlName="fechaExpIni" type="text" class="form-control" id="fecha-ExpIni" autocomplete="off">
                        <span *ngIf="formExp.get('fechaExpIni')?.invalid && formExp.get('fechaExpIni')?.touched" class="text-danger">La fecha de inicio es requerida</span>
                    </div>
                    <div class="form-group">
                        <label for="fecha-ExpFin" class="form-label">Fecha de Finalizacion</label>
                        <input formControlName="fechaExpFin" type="text" class="form-control" id="fecha-ExpFin" autocomplete="off">
                        <span *ngIf="formExp.get('fechaExpFin')?.invalid && formExp.get('fechaExpFin')?.touched" class="text-danger">La fecha de finalizacion es requerida</span>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button"  class="btn btn-danger" data-bs-dismiss="modal">Close</button>
                <button type="submit" (click)="editExperiencia()" [disabled]="formExp.invalid" class="btn btn-primary">Save</button>
            </div>
        </div>
    </div>
</div>
<!--Notificacion cuando no hay experiencias-->
<div *ngIf="experiencias.length == 0" class="col-lg-12 col-md-12 col-xl-12">
    <div class="alert alert-info" role="alert">
        <p>No hay experiencias para mostrar</p>
    </div>
</div>